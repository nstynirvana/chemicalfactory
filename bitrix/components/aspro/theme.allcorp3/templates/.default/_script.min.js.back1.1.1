var timerHide=!1;function checkDelay(parent){window.NO_WIDGET_TIMEOUT=!1,parent&&"Y"===parent.data("no-delay")&&(window.NO_WIDGET_TIMEOUT=!0)}function saveFrontParameter(params){paramsDefault={VALUE:"",NAME:"",OPTIONS:{},RELOAD:!1},params=Object.assign({},paramsDefault,params),$(".sharepreset-part--export").removeClass("sharepreset-part--exported2Link"),$.post(arAsproOptions.SITE_DIR+"ajax/options_save_mainpage.php",{VALUE:params.VALUE,NAME:params.NAME},(function(){reloadBlock(params.OPTIONS)})),params.RELOAD&&setTimeout((function(){$("form[name=style-switcher]").submit()}),200)}function reloadBlock(options){if($(".sharepreset-part--export").removeClass("sharepreset-part--exported2Link"),options.ajaxParent&&options.ajaxParent.length){options.parent&&options.parent.length&&(options.checked?options.parent.removeClass("disabled"):options.parent.addClass("disabled"));var pageBlock=options.ajaxParent.data("pageBlock"),target=options.element.closest(".option-ajax-target");if(target.length)var targetSelector=target.data("needBlock");pageBlock&&BX.ajax({url:location.href,method:"POST",data:{BLOCK:targetSelector,IS_AJAX:"Y"},onsuccess:function(html){if(html){var targetBlock=$('[data-ajax-load-block="'+targetSelector+'"]');if(targetBlock.length){var callback=options.ajaxParent.data("ajaxCallback");callback&&"function"==typeof window[callback]&&setTimeout((function(){window[callback](targetBlock)}),0),targetBlock.replaceWith(html)}}}})}}window.array=[],$(document).ready((function(){var timerDynamicLeftSide=!1,selectedThematic=arAsproOptions.THEMATICS.VALUE,restoreThematics=function(){selectedThematic=arAsproOptions.THEMATICS.VALUE,selectThematic(selectedThematic,!1)},selectThematic=function(thematic,bShowPresets){var $thematic=$thematic=$(".presets .thematik .item[data-code="+thematic+"]");if($thematic.length&&"object"==typeof arAsproOptions.THEMATICS.LIST[thematic]){for(var i in selectedThematic=thematic,$thematic.addClass("active").siblings().removeClass("active"),$(".presets .presets_subtabs .presets_subtab .desc").html("&mdash;"),$(".presets .presets_subtabs .presets_subtab:first .desc").text(arAsproOptions.THEMATICS.LIST[thematic].TITLE),$(".presets .presets_block .conf .item").addClass("hidden"),$(".presets .presets_block .conf .item .js-addpreset").closest(".item").removeClass("hidden"),"object"!=typeof BX.admin&&$(".presets .presets_block .conf .apply_conf_block").addClass("hidden"),$(".presets .presets_block .conf .item .preset-block.current").removeClass("current"),arAsproOptions.THEMATICS.LIST[thematic].PRESETS.LIST){var preset=arAsproOptions.THEMATICS.LIST[thematic].PRESETS.LIST[i],$presetBlock=$(".presets .presets_block .conf .item .preset-block[data-id="+preset+"]");$presetBlock.length&&"object"==typeof arAsproOptions.PRESETS.LIST[preset]&&($presetBlock.closest(".item").removeClass("hidden"),arAsproOptions.THEMATICS.LIST[thematic].URL.length&&$presetBlock.find(".apply_conf_block").removeClass("hidden"),arAsproOptions.THEMATICS.VALUE==thematic&&($presetBlock.find(".apply_conf_block").removeClass("hidden"),arAsproOptions.PRESETS.VALUE==preset&&($presetBlock.addClass("current"),$(".presets .presets_subtabs .presets_subtab:last .desc").text(arAsproOptions.PRESETS.LIST[preset].TITLE))))}void 0!==bShowPresets&&bShowPresets&&$(".presets .presets_subtabs .presets_subtab").last().trigger("click")}else;},selectPreset=function(preset){var $preset=$(".style-switcher .presets .preset-block[data-id="+preset+"]");if($preset.length){if($preset.hasClass("current")||$preset.hasClass("editing"))return;if("object"==typeof arAsproOptions.PRESETS.LIST[preset]){var bDev=-1!==location.hostname.indexOf("dev.aspro.ru"),bDemo=!bDev&&"object"==typeof arAsproOptions.THEMATICS.LIST[selectedThematic]&&arAsproOptions.THEMATICS.LIST[selectedThematic].URL.length&&"Y"===arAsproOptions.USE_DEMO_LINK,bPrepareWizard;!bDev&&!bDemo&&selectedThematic!=arAsproOptions.THEMATICS.VALUE?prepareWizard(selectedThematic,preset):($(".style-switcher .presets .preset-block.current").removeClass("current"),$preset.addClass("current"),$preset.closest(".presets").find(".presets_subtab.active .desc").text($preset.find(".info .title").text()),setConfiguration(selectedThematic,preset))}}},setConfiguration=function(thematic,preset){var bDev,bDemo;"object"==typeof arAsproOptions.THEMATICS.LIST[thematic]&&("object"==typeof arAsproOptions.PRESETS.LIST[preset]&&(!(-1!==location.hostname.indexOf("dev.aspro.ru"))&&arAsproOptions.THEMATICS.LIST[thematic].URL.length&&thematic!==arAsproOptions.THEMATICS.VALUE?location.href=arAsproOptions.THEMATICS.LIST[thematic].URL+"?preset="+preset:$.ajax({type:"POST",data:{thematic:thematic,preset:preset},success:function(){$(".style-switcher .presets_action").trigger("click"),setTimeout((function(){location.href=location.href}),300)}})))};"undefined"==typeof prepareWizard&&(prepareWizard=function(thematic,preset){"object"==typeof arAsproOptions.THEMATICS.LIST[thematic]&&"object"==typeof arAsproOptions.PRESETS.LIST[preset]&&$.ajax({url:$(".style-switcher .contents.wizard").data("script"),type:"POST",data:{action:"getform",thematic:thematic,preset:preset,lang:BX.message.LANGUAGE_ID},success:function(response){$(".style-switcher .contents.wizard").mCustomScrollbar("destroy"),$(".style-switcher .contents.wizard").html(response),$(".style-switcher .contents.wizard").addClass("active")}})}),$(".style-switcher .on-off-switch").on("click",(function(){var $checkbox=$(this).prev();if($checkbox.is("input[type=checkbox]")){var name=$checkbox.attr("name"),bChecked=!$checkbox.prop("checked");$checkbox.prop("checked",bChecked).trigger("change"),setTimeout((function(){if(-1!=window.array.indexOf(name))return!1;window.array.push(name),setTimeout((function(){window.array.splice(window.array.indexOf(name),1)}),500);var bNested=$checkbox.closest(".values").length&&!$checkbox.closest(".subs").length||$checkbox.closest(".option-ajax").length,$options=$checkbox.closest(".options");if(bChecked?$checkbox.val("Y"):$checkbox.val("N"),bNested){var ajax_btn=$('<div class="btn-ajax-block animation-opacity"></div>'),option_wrapper=$checkbox.closest(".option-wrapper"),pos=BX.pos(option_wrapper[0],!0),current_index=$checkbox.closest(".inner-wrapper").data("key"),div_class=name.replace(current_index+"_",""),top=0;ajax_btn.html($(".values > .apply-block").html()),option_wrapper.toggleClass("disabled"),top=pos.top+$(".style-switcher .header").actual("outerHeight"),ajax_btn.css("top",top),$(".btn-ajax-block").length&&$(".btn-ajax-block").remove(),ajax_btn.appendTo($(".style-switcher")),ajax_btn.addClass("opacity1"),bChecked?("WITH_LEFT_BLOCK"==div_class&&($(".wrapper_inner.front").removeClass("wide_page"),$(".wrapper1.front_page").addClass("with_left_block"),$(".wrapper_inner.front .container_inner > .right_block").removeClass("wide_Y").addClass("wide_N"),$(".wrapper_inner.front .container_inner > .left_block").removeClass("hidden"),void 0!==window.stickySidebar&&window.stickySidebar.updateSticky()),$(".drag-block[data-class="+div_class.toLowerCase()+"_drag]").removeClass("hidden"),$(".templates_block .item."+name).removeClass("hidden"),$(window).resize(),"BIG_BANNER_INDEX"==div_class?($("body").addClass("header_opacity"),$(window).resize()):"MAPS"==div_class&&"undefined"!=typeof map&&"undefined"!=typeof clusterer&&setTimeout((function(){map.setBounds(clusterer.getBounds(),{zoomMargin:40})}),200)):($(".drag-block[data-class="+div_class.toLowerCase()+"_drag]").addClass("hidden"),$(".templates_block .item."+name).addClass("hidden"),"WITH_LEFT_BLOCK"==div_class&&($(".wrapper_inner.front").addClass("wide_page"),$(".wrapper1.front_page").removeClass("with_left_block"),$(".wrapper_inner.front .container_inner > .right_block").removeClass("wide_N wide_").addClass("wide_Y"),$(".wrapper_inner.front .container_inner > .left_block").addClass("hidden"),$(window).resize()),"BIG_BANNER_INDEX"==div_class&&$("body").removeClass("header_opacity"));var eventdata={action:"jsLoadBlock"};BX.onCustomEvent("onCompleteAction",[eventdata]);var options={element:$(this.el),ajaxParent:$(this.el).closest(".option-ajax"),checked:bChecked,parent:$(this.el).closest(".option-ajax-target")}}checkDelay($options),setTimeout((function(){bNested||$("form[name=style-switcher]").submit()}),200)}),300)}})),HideHintBlock=function(bHideOverlay){(void 0===bHideOverlay||bHideOverlay)&&HideOverlay(),$.cookie("clickedSwitcher","Y",{path:"/"}),$(".hint-theme").length&&$(".hint-theme").fadeIn(300,(function(){$(".hint-theme").remove()}))},$(".style-switcher .presets .presets_block").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0,callbacks:{onScroll:function(){var topPositionPresets=$(".style-switcher .presets .mCSB_container").css("top").replace(/"/g,"");topPositionPresets=parseInt(topPositionPresets),topPositionPresets=isNaN(topPositionPresets)?0:topPositionPresets,$.cookie("STYLE_SWITCHER_SCROLL_PRESET_POSITION",topPositionPresets,{path:arAsproOptions.SITE_DIR})}},setTop:function(){try{return void 0!==$.cookie("STYLE_SWITCHER_SCROLL_PRESET_POSITION")?$.cookie("STYLE_SWITCHER_SCROLL_PRESET_POSITION")+"px":0}catch(error){return console.log(error),0}}()}),$(".style-switcher .left-block").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0,callbacks:{onScroll:function(){var topPositionLeftBlock=$(".style-switcher .left-block .mCSB_container").css("top").replace(/"/g,"");topPositionLeftBlock=parseInt(topPositionLeftBlock),topPositionLeftBlock=isNaN(topPositionLeftBlock)?0:topPositionLeftBlock,$.cookie("STYLE_SWITCHER_SCROLL_LEFT_POSITION",topPositionLeftBlock,{path:arAsproOptions.SITE_DIR})}},setTop:function(){try{return void 0!==$.cookie("STYLE_SWITCHER_SCROLL_LEFT_POSITION")?$.cookie("STYLE_SWITCHER_SCROLL_LEFT_POSITION")+"px":0}catch(error){return console.log(error),0}}()}),$(".style-switcher .contents.parametrs .right-block").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0,callbacks:{onScroll:function(){var topPositionRightBlock=$(".style-switcher .parametrs .right-block .mCSB_container").css("top").replace(/"/g,"");topPositionRightBlock=parseInt(topPositionRightBlock),topPositionRightBlock=isNaN(topPositionRightBlock)?0:topPositionRightBlock,$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION",topPositionRightBlock,{path:arAsproOptions.SITE_DIR})}},setTop:function(){try{return void 0!==$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION")?$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION")+"px":0}catch(error){return console.log(error),0}}()}),$(".style-switcher .contents.updates .right-block").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0,callbacks:{onScroll:function(){var topPositionRightBlock=$(".style-switcher .parametrs .right-block .mCSB_container").css("top").replace(/"/g,"");topPositionRightBlock=parseInt(topPositionRightBlock),topPositionRightBlock=isNaN(topPositionRightBlock)?0:topPositionRightBlock,$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION",topPositionRightBlock,{path:arAsproOptions.SITE_DIR})}},setTop:function(){try{return void 0!==$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION")?$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION")+"px":0}catch(error){return console.log(error),0}}()}),$(".style-switcher .contents.demos .right-block").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0});var submitTimer=!1,bCanSubmit=!1;function closeActiveSwitcherPopups(){var activePopup=$(".switcher-select__popup.active");activePopup.length&&activePopup.removeClass("active")}$("form[name=style-switcher]").submit((function(e){var $form=$(this);bCanSubmit||(e.preventDefault(),submitTimer&&(clearTimeout(submitTimer),submitTimer=!1),window.NO_WIDGET_TIMEOUT?(bCanSubmit=!0,$form.submit()):submitTimer=setTimeout((function(){bCanSubmit=!0,$form.submit()}),1500))})),$(".style-switcher .item input[type=checkbox]").on("change",(function(){$(".sharepreset-part--export").removeClass("sharepreset-part--exported2Link");var _this=$(this),bAjax;_this.is(":checked")?_this.val("Y"):_this.val("N"),void 0!==_this.data("dynamic")||_this.closest(".option-ajax")?(_this.data("index_block")&&_this.data("index_class")&&$(".drag-block.container."+_this.data("index_block")+" .index-block").toggleClass("index-block--"+_this.data("index_class")),$.post(arAsproOptions.SITE_DIR+"ajax/options_save_mainpage.php",{VALUE:_this.val(),NAME:_this.attr("name")},(function(){var options;reloadBlock({element:_this,ajaxParent:_this.closest(".option-ajax"),checked:_this.is(":checked")})}))):$("form[name=style-switcher]").submit()})),$("html, body").on("mousedown",(function(e){"string"==typeof e.target.className&&e.target.className.indexOf("adm")<0&&(e.stopPropagation(),$(e.target).closest(".style-switcher .dynamic_left_side").length||$(".style-switcher .dynamic_left_side").removeClass("active"),$(e.target).closest(".style-switcher .contents.wizard").length||$(".style-switcher .contents.wizard").removeClass("active"))})),$(".dynamic_left_side").find("*").on("mousedown",(function(e){e.stopPropagation()})),$(".sup-params .values .subtitle").click((function(){var _this,wrapper=$(this).closest(".option-wrapper");wrapper.find(".template_block > .item").is(":visible")?$.removeCookie("STYLE_SWITCHER_TEMPLATE"+wrapper.index(),{path:arAsproOptions.SITE_DIR}):$.cookie("STYLE_SWITCHER_TEMPLATE"+wrapper.index(),"Y",{path:arAsproOptions.SITE_DIR}),wrapper.find(".template_block .item").slideToggle(),wrapper.find(".bottom-options").slideToggle(),wrapper.find(".bottom-options").toggleClass("active")})),$(".presets .presets_subtabs .presets_subtab").on("click",(function(){var _this=$(this);_this.siblings().removeClass("active"),_this.addClass("active"),$(".presets .presets_block .options").removeClass("active"),_this.closest(".presets").find(".options:eq("+_this.index()+")").addClass("active"),0==_this.index()&&restoreThematics(),$.cookie("STYLE_SWITCHER_CONFIG_BLOCK",_this.index(),{path:arAsproOptions.SITE_DIR})})),$(document).on("click",".presets .thematik .item",(function(){var thematic=$(this).data("code");selectThematic(thematic,!0)})),$(document).on("click",".style-switcher .presets .preset-block .apply_conf_block",(function(e){var preset=$(this).closest(".preset-block").data("id");selectPreset(preset)})),$(".style-switcher .can_save .save_btn").on("click",(function(){var _this=$(this);timerHide&&(clearTimeout(timerHide),timerHide=!1),$.ajax({type:"POST",url:arAsproOptions.SITE_DIR+"ajax/options_save.php",data:{SAVE_OPTIONS:"Y"},dataType:"json",success:function(response){"STATUS"in response&&($(".save_config_status").length||$('<div class="save_config_status" style="display:none"><span></span></div>').appendTo(_this.parent()),"OK"===response.STATUS?$(".save_config_status").addClass("success"):$(".save_config_status").addClass("error"),$(".save_config_status span").text(BX.message(response.MESSAGE)),$(".save_config_status").fadeIn(600,(function(){timerHide=setTimeout((function(){$(".save_config_status").fadeOut(600,(function(){$(this).remove(),$(".action_block.can_save").remove(),$(".style-switcher .right-block .inner-content").removeClass("with-action-block")}))}),1e3)})))}})})),"presets"===$.cookie("styleSwitcherType")&&$(".style-switcher .presets").addClass("active"),$(".refresh-block.sup-params .values .inner-wrapper").each((function(){var _th=$(this),sort_block=_th[0];Sortable.create(sort_block,{handle:".drag",animation:150,forceFallback:!0,filter:".no_drag",preventOnFilter:!1,onStart:function(evt){evt.oldIndex,window.getSelection().removeAllRanges(),$(evt.item).find(".template_block, .bottom-options").addClass("hidden")},onEnd:function(evt){$(evt.item).find(".template_block, .bottom-options").removeClass("hidden")},onMove:function(evt){return-1===evt.related.className.indexOf("no_drag")},onUpdate:function(evt){var itemEl=evt.item,order=[],current_type=_th.data("key"),name="SORT_ORDER_INDEX_TYPE_"+current_type;$(itemEl).find(".template_block, .bottom-options").removeClass("hidden"),_th.find(".option-wrapper").each((function(){order.push($(this).find('.blocks input[type="checkbox"]').attr("name").replace(current_type+"_","")),$('div[data-class="'+$(this).find('.blocks input[type="checkbox"]').attr("name").toLowerCase().replace(current_type+"_","")+'_drag"]').attr("data-order",$(this).index()+1)})),$("input[name="+name+"]").val(order.join(",")),$(".sharepreset-part--export").removeClass("sharepreset-part--exported2Link"),$.post(arAsproOptions.SITE_DIR+"ajax/options_save_mainpage.php",{VALUE:order.join(","),NAME:name});var eventdata={action:"jsLoadBlock"};BX.onCustomEvent("onCompleteAction",[eventdata])}})})),$(".color_custom input[type=hidden]").length&&$(".color_custom input[type=hidden]").each((function(){var _this=$(this),parent=$(this).closest(".color_custom"),options=$(this).closest(".options");_this.spectrum({preferredFormat:"hex",showButtons:!0,showInput:!0,showPalette:!1,appendTo:parent,chooseText:BX.message("CUSTOM_COLOR_CHOOSE"),cancelText:BX.message("CUSTOM_COLOR_CANCEL"),containerClassName:"custom_picker_container",replacerClassName:"custom_picker_replacer",clickoutFiresChange:!1,move:function(color){var colorCode=color.toHexString();parent.find("span span.bg").attr("style","background:"+colorCode)},hide:function(color){var colorCode=color.toHexString();parent.find("span span.bg").attr("style","background:"+colorCode)},change:function(color){var colorCode=color.toHexString();parent.addClass("current").siblings().removeClass("current"),parent.find("span span.vals").text(colorCode),parent.find("span.animation-all").attr("style","border-color:"+colorCode),checkDelay(options),$("form[name=style-switcher] input[name="+parent.find(".click_block").data("option-id")+"]").val(parent.find(".click_block").data("option-value")),$("form[name=style-switcher]").submit()}})})),$(".color_custom").click((function(e){return e.preventDefault(),$("input[name="+$(this).data("name")+"]").spectrum("toggle"),!1})),$(".base_color.current").length&&$(".base_color.current").each((function(){var color_block=$(this).closest(".options").find(".color_custom"),curcolor=$(this).data("color");null!=curcolor&&curcolor.length&&($("input[name="+color_block.data("name")+"]").spectrum("set",curcolor),color_block.find("span span").attr("style","background:"+curcolor))})),$(".style-switcher .switch,.style-switcher .presets_action").click((function(e){e.preventDefault();var styleswitcher=$(this).closest(".style-switcher"),presets=styleswitcher.find(".presets"),parametrs=styleswitcher.find(".parametrs"),bSwitchPresets=$(this).hasClass("presets_action");styleswitcher.find(".section-block").removeClass("active");try{void 0!==$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION")&&$(".style-switcher .contents.parametrs .right-block").mCustomScrollbar("scrollTo",$.cookie("STYLE_SWITCHER_SCROLL_RIGHT_POSITION")),void 0!==$.cookie("STYLE_SWITCHER_SCROLL_LEFT_POSITION")&&$(".style-switcher .left-block").mCustomScrollbar("scrollTo",$.cookie("STYLE_SWITCHER_SCROLL_LEFT_POSITION")),void 0!==$.cookie("STYLE_SWITCHER_SCROLL_PRESET_POSITION")&&$(".style-switcher .presets .presets_block").mCustomScrollbar("scrollTo",$.cookie("STYLE_SWITCHER_SCROLL_PRESET_POSITION"))}catch(error){console.log(error)}if(styleswitcher.hasClass("active")){restoreThematics();var typeSwitcher=$.cookie("styleSwitcherType");styleswitcher.find(".switch").removeClass("active"),styleswitcher.find(".presets_action").removeClass("active"),bSwitchPresets&&"presets"===typeSwitcher||!bSwitchPresets&&"parametrs"===typeSwitcher?(HideHintBlock(!0),$.removeCookie("styleSwitcherType",{path:"/"}),$.removeCookie("styleSwitcher",{path:"/"}),styleswitcher.addClass("closes"),setTimeout((function(){styleswitcher.removeClass("active")}),300)):(HideHintBlock(!1),$.cookie("styleSwitcherType",bSwitchPresets?"presets":"parametrs",{path:"/"}),styleswitcher.find(".header .title").hide(),bSwitchPresets?($(".section-block.presets_tab").addClass("active"),presets.addClass("active"),parametrs.removeClass("active")):$(this).hasClass("demo_action")?($(".section-block.demos_tab").removeClass("hidden").addClass("active"),$(".inner-content .contents").removeClass("active"),$(".inner-content .contents.demos").removeClass("hidden").addClass("active"),$.removeCookie("styleSwitcherType",{path:"/"}),$.removeCookie("styleSwitcher",{path:"/"})):($(".section-block.parametrs_tab").addClass("active"),presets.removeClass("active"),parametrs.addClass("active")),$(this).addClass("active"))}else HideHintBlock(!0),$(this).addClass("active"),$.cookie("styleSwitcherType",bSwitchPresets?"presets":"parametrs",{path:"/"}),$.cookie("styleSwitcher","open",{path:"/"}),bSwitchPresets?($(".section-block.presets_tab").addClass("active"),presets.addClass("active"),parametrs.removeClass("active")):$(this).hasClass("demo_action")?($(".section-block.demos_tab").removeClass("hidden").addClass("active"),$(".inner-content .contents").removeClass("active"),$(".inner-content .contents.demos").removeClass("hidden").addClass("active"),$.removeCookie("styleSwitcherType",{path:"/"}),$.removeCookie("styleSwitcher",{path:"/"})):($(".section-block.parametrs_tab").addClass("active"),presets.removeClass("active"),parametrs.addClass("active")),ShowOverlay(),styleswitcher.removeClass("closes").addClass("active");void 0!==$(this).data("option-type")&&$.cookie("scroll_block",$(this).data("option-type"))})),$('.item.groups-tab a[data-toggle="tab"].linked').on("shown.bs.tab",(function(e){var _this=$(this);$.cookie("styleSwitcherTabs"+_this.closest(".tabs").data("parent"),_this.parent().index(),{path:"/"})})),$(document).on("click",".close-overlay",(function(){HideHintBlock()})),$(".close_block").click((function(){$(".jqmOverlay").trigger("click")})),$(document).on("click",".jqmOverlay",(function(){var styleswitcher=$(".style-switcher");$(".hint-theme").length||HideOverlay(),styleswitcher.each((function(){var _this=$(this);_this.addClass("closes"),setTimeout((function(){_this.removeClass("active")}),300),$(".form_demo-switcher").animate({left:"-"+$(".form_demo-switcher").outerWidth()+"px"},100).removeClass("active abs")})),$(".style-switcher .switch,.style-switcher .presets_action").removeClass("active"),restoreThematics(),$.removeCookie("styleSwitcherType",{path:"/"}),$.removeCookie("styleSwitcher",{path:"/"})})),$(".style-switcher .section-block").on("click",(function(){var $tab=$(this);$tab.addClass("active").siblings().removeClass("active"),$(".style-switcher .right-block .contents."+$tab.data("type")).addClass("active").siblings().removeClass("active"),$.cookie("styleSwitcher","open",{path:"/"}),$.cookie("styleSwitcherType",$tab.data("type"),{path:"/"}),($tab.hasClass("share_tab")||$tab.hasClass("demos_tab")||$tab.hasClass("updates_tab"))&&($.removeCookie("styleSwitcherType",{path:"/"}),$.removeCookie("styleSwitcher",{path:"/"}),$tab.is(".share_tab.loading_state")?$(".style-switcher .contents.share").length&&$.ajax({url:$(".style-switcher .contents.share").data("script"),type:"POST",data:{siteId:arAsproOptions.SITE_ID,siteDir:arAsproOptions.SITE_DIR,lang:BX.message.LANGUAGE_ID},beforeSend:function(){$tab.addClass("loading_state"),$(".style-switcher .contents.share").addClass("form sending")},success:function(response){$(".style-switcher .contents.share").mCustomScrollbar("destroy"),$(".style-switcher .contents.share").html(response)},error:function(jqXhr){console.log(jqXhr)},complete:function(){$tab.removeClass("loading_state"),$(".style-switcher .contents.share").removeClass("form sending")}}):$tab.is(".updates_tab.loading_state")&&$.ajax({url:"https://aspro.ru/demo/updates/index.php",type:"POST",data:{AJAX_FORM:"Y",lang:BX.message.LANGUAGE_ID},beforeSend:function(){$tab.addClass("loading_state"),$(".style-switcher .contents.updates").addClass("form sending")},success:function(html){$(".right-block .inner-content .contents.updates .body_block").html(html.replace(/dark-color/g,"dark_link"))},error:function(jqXhr){console.log(jqXhr)},complete:function(){$tab.removeClass("loading_state"),$(".style-switcher .contents.updates").removeClass("form sending")}}))})),$(".style-switcher .subsection-block").on("click",(function(){$(this).siblings().removeClass("active"),$(this).addClass("active"),$(".style-switcher .right-block .contents .content-body .block-item").removeClass("active"),$(".style-switcher .right-block .contents .content-body .block-item:eq("+$(this).index()+")").addClass("active"),$(".style-switcher [class*=_BACK_BUTTON]").hide(),$.cookie("styleSwitcherSubType",$(this).index(),{path:"/"})})),$(".style-switcher .reset").click((function(e){$("form[name=style-switcher]").append('<input type="hidden" name="THEME" value="default" />'),$("form[name=style-switcher]").submit(),$.removeCookie("styleSwitcherTabsCatalog",{path:"/"})})),$(document).on("click",".sharepreset-trigger-open",(function(e){e.preventDefault(),$(".section-block.share_tab").trigger("click")})),$(document).on("click",".style-switcher .apply",(function(){$("form[name=style-switcher]").submit()})),$(".style-switcher .sup-params.options .block-title").click((function(){$(this).next().slideToggle()})),$(document).on("click",".style-switcher .preview_conf_block .btn",(function(){var _this=$(this);$(".dynamic_left_side").length&&$(".dynamic_left_side").remove(),$('<div class="dynamic_left_side"><div class="items_inner"><div class="titles_block"></div></div></div>').appendTo(_this.closest(".contents.presets .presets_block")),$(".dynamic_left_side .titles_block").html('<div class="title">'+_this.closest(".preset-block").find(".info .title").text()+'</div><div class="blocks_wrapper"><div class="cl" title="'+BX.message("FANCY_CLOSE")+'">'+$(".close_block .closes").html()+"</div>"+(_this.closest(".preset-block").find(".apply_conf_block").hasClass("hidden")?"":'<div class="ch" data-id="'+_this.closest(".preset-block").data("id")+'">'+_this.closest(".preset-block").find(".apply_conf_block").html()+"</div>")+"</div>"),$('<div class="desc">'+_this.closest(".preset-block").find(".info .description").text()+"</div>").appendTo($(".dynamic_left_side .items_inner")),_this.closest(".preset-block").find(".info .description").data("img")&&$('<div class="img"><img src="'+_this.closest(".preset-block").find(".info .description").data("img")+'" /></div>').appendTo($(".dynamic_left_side .items_inner")),$(".dynamic_left_side").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0}),timerDynamicLeftSide&&(clearTimeout(timerDynamicLeftSide),timerDynamicLeftSide=!1),timerDynamicLeftSide=setTimeout((function(){$(".dynamic_left_side").addClass("active")}),100)})),$(".style-switcher .ext_hint_title").click((function(){var _this=$(this);$(".dynamic_left_side").length&&$(".dynamic_left_side").remove(),$('<div class="dynamic_left_side"><div class="items_inner"></div></div>').appendTo(_this.closest(".contents.parametrs > .right-block")),$('<div class="cl" title="'+BX.message("FANCY_CLOSE")+'">'+$(".close_block .closes").html()+"</div>").appendTo($(".dynamic_left_side")),$(".ext_hint_desc").find("iframe").attr("src",$(".ext_hint_desc").find("iframe").data("src")),$(".dynamic_left_side .items_inner").html(_this.siblings(".ext_hint_desc").html()),$(".dynamic_left_side").mCustomScrollbar({mouseWheel:{scrollAmount:150,preventDefault:!0},ignoreTouchIntent:!0}),timerDynamicLeftSide&&(clearTimeout(timerDynamicLeftSide),timerDynamicLeftSide=!1),timerDynamicLeftSide=setTimeout((function(){$(".dynamic_left_side").addClass("active")}),100)})),$(document).on("click",".dynamic_left_side .ch .btn",(function(e){var preset=$(this).parent().data("id");selectPreset(preset),$(".dynamic_left_side").removeClass("active")})),$(document).on("click",".dynamic_left_side .cl",(function(e){$(".dynamic_left_side").removeClass("active")})),$(".style-switcher .options > .link-item,.style-switcher .options > div:not(.color_custom) .link-item,.style-switcher .options > div:not(.color_custom) .click_block").click((function(e){var _this=$(this),bMulti="multi"==_this.data("type"),bCurrent=_this.hasClass("current"),options=_this.closest(".options");if(!(e&&e.target&&$(e.target).closest(".toggle-parent").length)&&((!bCurrent||e&&e.target&&($(e.target).closest(".switcher-select").length||$(e.target).closest(".checkbox-wrapper").length))&&(void 0!==$(this).data("option-type")&&$.cookie("scroll_block",$(this).data("option-type")),void 0!==$(this).data("option-url")&&$("form[name=style-switcher]").prepend('<input type="hidden" name="backurl" value='+$(this).data("option-url")+" />")),(bMulti||!bCurrent)&&(!e||!e.target||bCurrent||!$(e.target).closest(".switcher-select").length))){if(bMulti?_this.toggleClass("current"):(_this.closest(".subs").length||_this.closest(".options").find(".link-item").removeClass("current"),_this.addClass("current").siblings().removeClass("current")),bMulti){var input=$("form[name=style-switcher] input[name="+_this.data("option-id")+"]"),inputVal=input.val();inputVal?(inputVal=inputVal.split(","),bCurrent?inputVal.splice(inputVal.indexOf(_this.data("option-value")),1):inputVal.push(_this.data("option-value")),inputVal=inputVal.join(),input.val(inputVal)):input.val(_this.data("option-value"))}else $("form[name=style-switcher] input[name="+_this.data("option-id")+"]").val(_this.data("option-value"));if(_this.closest(".sup-params").length&&$.removeCookie("styleSwitcher",{path:"/"}),checkDelay(options),"Y"===options.data("ajax")){const value=_this.data("option-value").toLowerCase();var saveParams;"THEME_VIEW_COLOR"===_this.data("option-id")&&($("body").removeClass("theme-default theme-dark theme-light"),$("body").addClass("theme-"+value),$(".jqmOverlay").trigger("click")),saveFrontParameter({VALUE:_this.data("option-value"),NAME:_this.data("option-id")}),"THEME_VIEW_COLOR"===_this.data("option-id")&&BX.onCustomEvent("onChangeThemeColor",[{value:value}])}else if(_this.closest(".options").hasClass("refresh-block")){if(!_this.closest(".options").hasClass("sup-params"))var index=_this.index()-1;_this.closest(".item").find(".sup-params.options").removeClass("active"),_this.closest(".item").find(".sup-params.options.s_"+_this.data("option-value")).addClass("active"),$("form[name=style-switcher]").submit()}else $("form[name=style-switcher]").submit()}})),$(".tooltip-link").on("shown.bs.tooltip",(function(e){var tooltip_block=$(this).next(),wihdow_height=$(window).height(),scroll=$(this).closest("form").scrollTop(),pos=BX.pos($(this)[0],!0),pos_tooltip=BX.pos(tooltip_block[0],!0),pos_item_wrapper=BX.pos($(this).closest(".item")[0],!0);!$(this).closest(".item").next().length&&pos_tooltip.bottom>pos_item_wrapper.bottom&&(tooltip_block.removeClass("bottom").addClass("top"),tooltip_block.css({top:pos.top-tooltip_block.actual("outerHeight")}))})),$(document).on("click",".style-switcher .toggle-options__link",(function(){var _this,tab=$(this).data("tab");if(tab){var targetTab=$(".style-switcher .subsection-block[data-code="+tab+"]");if(targetTab.length){targetTab.trigger("click");var backButton=$(".block-item."+tab+" ."+tab+"_BACK_BUTTON");backButton.length&&backButton.show()}}})),$(document).on("click",".style-switcher .switcher__back-button",(function(){var _this=$(this),targetTab=$(".style-switcher .subsection-block[data-code=HEADER]");targetTab.length&&(_this.closest(".item").hide(),targetTab.trigger("click"))})),$(document).on("click",".style-switcher .toggle-parent",(function(e){var _this=$(this),target=_this.siblings(".toggle-target");(target=target.length?target:_this.find(".toggle-target")).length&&target.slideToggle()})),$(document).on("click",".switcher-select__current",(function(){var _this,popup=$(this).siblings(".switcher-select__popup"),bActive=popup.hasClass("active");closeActiveSwitcherPopups(),popup.length&&(bCanSubmit=!1,submitTimer&&(clearTimeout(submitTimer),submitTimer=!1),bActive?popup.removeClass("active"):popup.addClass("active"))})),$(document).on("click",(function(e){var _target=$(e.target);_target.hasClass("switcher-select__popup-item")||_target.hasClass("switcher-select__current")||closeActiveSwitcherPopups()})),$(document).on("click",".switcher-select__popup-item",(function(){var _this=$(this),value=_this.data("value"),title=_this.data("title"),parent=_this.closest(".switcher-select"),current;if(!(current=_this.hasClass("switcher-select__popup-item--current"))&&parent.length){var input=parent.find(".switcher-select__input"),saveParams,saveParams,current;if(input.length)if(input.val(value),_this.closest(".link-item").length)if(_this.closest(".link-item.current").length)saveFrontParameter(saveParams={VALUE:value,NAME:input.attr("name"),RELOAD:!0});else _this.closest(".link-item").trigger("click");else saveFrontParameter(saveParams={VALUE:value,NAME:input.attr("name"),RELOAD:!0});(current=parent.find(".switcher-select__current")).length&&current.text(title),parent.find(".switcher-select__popup-item--current").removeClass("switcher-select__popup-item--current"),_this.addClass("switcher-select__popup-item--current")}var popup=_this.closest(".switcher-select__popup");popup.length&&popup.toggleClass("active")})),$(document).on("change",".bottom-options input",(function(){var _this=$(this),value,saveParams;saveFrontParameter({VALUE:_this.val(),NAME:_this.attr("name"),RELOAD:!0})})),$(".style-switcher [data-option-id=SIDE_MENU]").on("click",(function(){$.cookie("side_menu","Y")}))}));
//# sourceMappingURL=script.min.js.map